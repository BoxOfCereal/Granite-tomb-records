<section class=" bg-black py-8" id="shows">
    <div class="container mx-auto px-4 ">
      <a href="/shows/">
        <h2 class="text-3xl uppercase mb-12 text-center">Shows</h2>
      </a>
        <div
            class="grid sm:grid-cols-2 md:grid-cols-3 gap-4">
            <!-- Photo n -->
            {# {{collections.shows|dump}} #}
            {% for show in collections.shows %}
                <a href="{{ show.url }}" class="relative bg-black border border-light overflow-hidden group">
                    <div class="absolute top-4 left-4 bg-black/80 text-white px-3 py-1 rounded">
                        <span class="text-sm">{{ show.date | date("MMMM D, YYYY") }}</span>
                    </div>
                    <img src="{{ show.poster }}" srcset="{{ show.poster }}" 
                         sizes="(max-width: 640px) 200px, (max-width: 1024px) 400px, 1080px" 
                         alt="{{ show.title }} at {{ show.venue }}" 
                         loading="lazy" 
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" />
                </a>
            {% endfor %}
        </div>
    </div>
</section>

<style>
.shimmer-overlay {
  background: linear-gradient(90deg, rgba(30,30,30,0.8) 0%, rgba(60,60,60,0.2) 50%, rgba(30,30,30,0.8) 100%);
  background-size: 200% 100%;
  animation: shimmer 2.25s infinite linear;
}
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll('.shimmer-img').forEach(function(img) {
    function hideShimmer() {
      const shimmer = img.closest('.relative').querySelector('.shimmer-overlay');
      if (shimmer) shimmer.style.display = 'none';
    }
    if (img.complete && img.naturalHeight !== 0) {
      hideShimmer();
    } else {
      img.addEventListener('load', hideShimmer, { once: true });
      img.addEventListener('error', hideShimmer, { once: true });
    }
  });
});
</script>